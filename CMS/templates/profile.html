{% extends 'base.html' %}
{% block signup_button %}
<div class="signup-button">
  {% if request.user.is_authenticated %}
  <a class="btn btn-primary btn-lg shadow-lg" href="/logout/" style="margin-right:12px;" role="button">
    Logout
  </a>
  {% else %}
  <a class="btn btn-primary btn-lg shadow-lg" href="/signup/" style="margin-right:12px;" role="button">
    Signup
  </a>
  {% endif %}
</div>
{% endblock %}
{% block title %}Profile - KJSIT Conference Management System{% endblock %}
{% block additional-css %}

.search_container{
  min-width: 550px;
  
}


.search_container .searchInput{
  background: #fff;
  width: 100%;
  border-radius: 5px;
  position:relative;
  box-shadow: 0px 1px 5px 3px rgba(0,0,0,0.12);
}

.searchInput input{
  height: 55px;
  width: 100%;
  outline: none;
  border: none;
  border-radius: 5px;
  padding: 0 0px 0 20px;
  font-size: 18px;
  box-shadow: 0px 1px 5px rgba(0,0,0,0.1);
}

.searchInput.active input{
  border-radius: 5px 5px 0 0;
}

.searchInput .resultBox{
  padding: 0;
  opacity: 0;
  pointer-events: none;
  max-height: 280px;
  overflow-y: auto;
}

.searchInput.active .resultBox{
  padding: 10px 8px;
  opacity: 1;
  pointer-events: auto;
}

.resultBox li{
  list-style: none;
  padding: 8px 12px;
  display: none;
  width: 100%;
  cursor: default;
  border-radius: 3px;
}

.searchInput.active .resultBox li{
  display: block;
}
.resultBox li:hover{
  background: #efefef;
}

.searchInput .icon{
  position: absolute;
  right: 0px;
  top: 0px;
  height: 55px;
  width: 55px;
  text-align: center;
  line-height: 55px;
  font-size: 20px;
  color: #644bff;
  cursor: pointer;
}

@media only screen and (max-width: 770px) {
  .col{
    min-width:-webkit-fill-available;
    margin-bottom:10px;
  }
}  
.ag-conference_box {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: start;
  -ms-flex-align: start;
  align-items: flex-start;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;

  padding: 50px 0;
}
.ag-conference_item {
  -ms-flex-preferred-size: calc(33.33333% - 30px);
  flex-basis: calc(33.33333% - 30px);

  margin: 0 15px 30px;

  overflow: hidden;

  border-radius: 28px;
}
.ag-conference-item_link {
  display: block;
  padding: 30px 20px;
  background-color: #121212;

  overflow: hidden;

  position: relative;
}
.ag-conference-item_link:hover,
.ag-conference-item_link:hover .ag-conference-item_role {
  text-decoration: none;
  color: #FFF;
}
.ag-conference-item_link:hover .ag-conference-item_bg {
  -webkit-transform: scale(10);
  -ms-transform: scale(10);
  transform: scale(10);
}
.ag-conference-item_title {
  min-height: 87px;
  margin: 0 0 25px;

  overflow: hidden;
  text-decoration:inherit;
  font-weight: bold;
  font-size: 30px;
  color: #fff;

  z-index: 2;
  position: relative;
}
.ag-conference-item_role-box {
  font-size: 18px;
  color: #FFF;
  text-decoration:inherit;
  z-index: 2;
  position: relative;
}
.ag-conference-item_role {
  font-weight: bold;
  color: #f9b234;

  -webkit-transition: color .5s ease;
  -o-transition: color .5s ease;
  transition: color .5s ease
}
.ag-conference-item_bg {
  height: 128px;
  width: 128px;
  background-color: #e44002;

  z-index: 1;
  position: absolute;
  top: -75px;
  right: -75px;

  border-radius: 50%;

  -webkit-transition: all .5s ease;
  -o-transition: all .5s ease;
  transition: all .5s ease;
}


@media only screen and (max-width: 979px) {
  .ag-conference_item {
    -ms-flex-preferred-size: calc(50% - 30px);
    flex-basis: calc(50% - 30px);
  }
  .ag-conference-item_title {
    font-size: 24px;
  }
}

@media only screen and (max-width: 767px) {
  .ag-format-container {
    width: 96%;
  }

}
@media only screen and (max-width: 639px) {
  .ag-conference_item {
    -ms-flex-preferred-size: 100%;
    flex-basis: 100%;
  }
  .ag-conference-item_title {
    min-height: 72px;
    line-height: 1;

    font-size: 24px;
  }
  .ag-conference-item_link {
    padding: 22px 40px;
  }
  .ag-conference-item_role-box {
    font-size: 16px;
  }
}

@media only screen and (max-width: 430px) {
    .search_container{
      min-width:auto;
    }
  
    .image-box{
      display:none;
    }
    .text-box{
      text-align:center;
    }
  }
{% endblock additional-css %}
{% block content %}
<center>
    <div class="row" style="max-width:fit-content;">
        <div class="container_main" style="max-width:800px;margin: 30px auto;display:flex;" >
            <div class="search_container" >
              <div class="searchInput shadow-lg">
                <input type="text" placeholder="Search Conferences.." >
              <div class="resultBox" >
                
              </div>
              <div class="icon" ><i class="fas fa-search"></i></div>
              </div>
            </div>
            
            <div class="create-button" style="margin-left:15px;">
              <button class="btn" style="min-height:70px;min-width:150px;border-radius:50px;background-color: DodgerBlue;
                color: white;
                font-size: 25px; 
                cursor: pointer;
               " type="button" class="btn btn-primary" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Tooltip on top">
               <span data-bs-toggle="modal" data-bs-target="#myModal" >
               <i class="fa fa-plus-circle"></i> 
                Create
               </span>
              </button>
            </div>   
        </div>
    </div>
</center> 
<div class="modal fade dark-modal" id="myModal" data-bs-backdrop="static" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header" style="background-color:#a70000;color:#fff;">
        <h5 class="modal-title" style="margin-left:10px;" id="exampleModalLabel">Conference Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="cl"></button>
      </div>
      <div class="modal-body" style="overflow-x:hidden;">
        <div class="row" style="margin-top:10px;">
          <div class="form-floating" style=" text-align:center; margin-left:20px;">
            <input type="text" name="fname" class="form-control" id="floatingInput1" placeholder="Firstname" style="width: 95%" required>
            <label for="floatingInput1" style="margin-left: 10px;">Title</label>                            
          </div>
        </div>
        <div class="row" style="margin-top:10px;">
          <div class="form-floating" style=" text-align:center; margin-left:20px;">
            <input type="text" name="fname" class="form-control" id="floatingInput2" placeholder="Firstname" style="width: 95%" required>
            <label for="floatingInput2" style="margin-left: 10px;">Organizing Institute</label>                            
          </div>
        </div>
        <div class="row" style="margin-top:10px;">
          <div class="col">
            <div class="form-floating" style=" text-align:center; margin-left:20px;">
              <textarea type="text" name="fname" class="form-control" id="floatingInput3" placeholder="Firstname" style="min-height: 130px; width: 95%;" required></textarea>
              <label for="floatingInput3">About Institute</label>                            
            </div>
          </div>
          <div class="col">
            <div class="form-floating" style=" text-align:center; margin-left:20px;">
              <textarea type="text" name="fname" class="form-control" id="floatingInput4" placeholder="Firstname" style="min-height: 130px; width: 95%;" required></textarea>
              <label for="floatingInput4">About Conference</label>                            
            </div>
          </div>
        </div>
        <strong><label style="margin-bottom: 0%; margin-top: 50px;margin-left:20px;color:DodgerBlue;">Important Dates</label></strong>
       
        <div class="row" style="margin-top:10px;">
          <div class="col">
            <div class="form-floating" style=" text-align:center; margin-left:20px;">
              <input type="date" name="fname" class="form-control" id="floatingInput5" placeholder="Firstname" style="width: fit-content;" required>
              <label for="floatingInput5">Submission Deadline</label>                            
            </div>
          </div>
          <div class="col">
            <div class="form-floating" style=" text-align:center; margin-left:20px;">
              <input type="date" name="fname" class="form-control" id="floatingInput6" placeholder="Firstname" style="width: fit-content;" required>
              <label for="floatingInput6">Notification of Acceptance</label>                            
            </div>
          </div>
          <div class="col">
            <div class="form-floating" style=" text-align:center; margin-left:20px;">
              <input type="date" name="fname" class="form-control" id="floatingInput7" placeholder="Firstname" style="width: fit-content;" required>
              <label for="floatingInput7">Registration Deadline</label>                            
            </div>
          </div>
        </div>
        <div class="row" style="margin-top:10px;">
          <div class="col-auto">
            <div class="form-floating" style=" text-align:center; margin-left:20px;">
            <input type="date" name="fname" class="form-control" id="floatingInput8" placeholder="Firstname" style="width: fit-content;" required>
            <label for="floatingInput8">Camera Ready Papers</label>                            
          </div>
          </div>
          <div class="col-auto">
            <div class="form-floating" style=" text-align:center; margin-left:20px;">
            <input type="date" name="fname" class="form-control" id="floatingInput9" placeholder="Firstname" style="width: fit-content;" required>
            <label for="floatingInput9">Conference Date</label>                            
          </div>
          </div>
        </div>
        <div class="row" style="margin-top: 20px;">
          <div class="form-floating" style=" text-align:center; margin-left:20px;">
            <input type="text" name="fname" class="form-control" id="floatingInput10" placeholder="Firstname" style="width: 95%;" required>
            <label for="floatingInput10" style="margin-left: 10px;">Conference Venue</label>                            
          </div>
        </div>
        
        <strong><label style="margin-bottom: 0%; margin-top: 50px;margin-left:20px;color:DodgerBlue;">Committees</label></strong>
        <center><label style="margin-bottom: 5px;">Organizing Committee</label></center>
        <div id="attributes1"><div class="attr1">
          <div class="row" style="margin-top:10px;">
                
                <div class="col-auto mb-3">
                  <div class="form-floating" style=" text-align:center; margin-left:20px;">
                    <input type="text" name="fname" class="form-control" id="floatingInput11" placeholder="Firstname" style="width: 95%" required>
                    <label for="floatingInput11">Name</label>                            
                  </div>
                </div>
                <div class="col-auto mb-3">
                  <div class="form-floating" style=" text-align:center; margin-left:20px;">
                    <input type="text" name="fname" class="form-control" id="floatingInput12" placeholder="Firstname" style="width: 95%" required>
                    <label for="floatingInput12">Domain</label>                            
                  </div>
                </div>
                <div class="col-auto mb-3">
                  <div class="form-floating" style=" text-align:center; margin-left:20px;">
                    <input type="text" name="fname" class="form-control" id="floatingInput13" placeholder="Firstname" style="width: 95%" required>
                    <label for="floatingInput13">Role and Institute</label>                            
                  </div>
                </div>
              </div>
          <center>
          <button class="btn btn-danger remove1" type="button"><i class="fa fa-minus" aria-hidden="true"></i></button>
          </center>
        </div>
        </div>
        <center>
          <button class="btn btn-large btn-success add1" type="button"  style="margin-top:10px ; margin-bottom:10px;">Add more members</button>
        </center>
        <center><label style="margin-top: 10px; margin-bottom: 5px;">Advisory Committee</label></center>
        <div id="attributes"><div class="attr">
          <div class="row" style="margin-top:10px;">
                
                <div class="col-auto mb-3">
                  <div class="form-floating" style=" text-align:center; margin-left:20px;">
                    <input type="text" name="fname" class="form-control" id="floatingInput11" placeholder="Firstname" style="width: 95%" required>
                    <label for="floatingInput11">Name</label>                            
                  </div>
                </div>
                <div class="col-auto mb-3">
                  <div class="form-floating" style=" text-align:center; margin-left:20px;">
                    <input type="text" name="fname" class="form-control" id="floatingInput12" placeholder="Firstname" style="width: 95%" required>
                    <label for="floatingInput12">Role</label>                            
                  </div>
                </div>
                <div class="col-auto mb-3">
                  <div class="form-floating" style=" text-align:center; margin-left:20px;">
                    <input type="text" name="fname" class="form-control" id="floatingInput13" placeholder="Firstname" style="width: 95%" required>
                    <label for="floatingInput13">Institute</label>                            
                  </div>
                </div>
              </div>
              <center>
                <button class="btn btn-danger remove" type="button"><i class="fa fa-minus" aria-hidden="true"></i></button>
              </center>
        </div>
        </div>
        <center>
          <button class="btn btn-large btn-success add" type="button" style="margin-top:10px ; margin-bottom:10px;">Add more members</button>
        </center>
        <div id="attributes2"><div class="attr2">
        <div class="row" style="margin-top: 50px; margin-bottom: 20px;">
          <div class="form-floating" style=" text-align:center; margin-left:20px;">
            <input type="file" name="fname" class="form-control" id="floatingInput17" placeholder="Firstname" style="width: 95%" required>
            <label for="floatingInput17" style="margin-left: 10px;">Images of Conference</label>                            
          </div>
        </div>
        <center>
          <button class="btn btn-danger remove2" type="button"><i class="fa fa-minus" aria-hidden="true"></i></button>
        </center>
        </div>
        </div>
        <center>
         <button class="btn btn-large btn-success add2" type="button" style="margin-top:10px ; margin-bottom:10px;">Add more Images</button>
        </center>
      </div>
      
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Create</button>
      </div>
    </div>
  </div>
</div>

(Cards should be added according to the conference user has enrolled)
<div class="ag-conference_box">
 <div class="ag-conference_item">
   <a href="#" class="ag-conference-item_link">
     <div class="ag-conference-item_bg"></div>
 
     <div class="ag-conference-item_title">
       ICAST&#160;2022
     </div>
 
     <div class="ag-conference-item_role-box">
       Role:
       <span class="ag-conference-item_role">
         (Role)
       </span>
     </div>
   </a>
 </div>
</div>
{% endblock %}

{% block additional-script %}
    <script>
     let suggestions = [
     {% for conference in conferences %}
     "{{conference.title}}",
 {% endfor %}
];

// getting all required elements
const searchInput = document.querySelector(".searchInput");
const input = searchInput.querySelector("input");
const resultBox = searchInput.querySelector(".resultBox");
const icon = searchInput.querySelector(".icon");
let linkTag = searchInput.querySelector("a");
let webLink;

// if user press any key and release
input.onkeyup = (e)=>{
    let userData = e.target.value; //user enetered data
    let emptyArray = [];
    if(userData){
        emptyArray = suggestions.filter((data)=>{
            //filtering array value and user characters to lowercase and return only those words which are start with user enetered chars
            return data.toLocaleLowerCase().startsWith(userData.toLocaleLowerCase()); 
        });
        emptyArray = emptyArray.map((data)=>{
            // passing return data inside li tag
            return data = '<li>'+ data+'</li>';
        });
        searchInput.classList.add("active"); //show autocomplete box
        showSuggestions(emptyArray);
        let allList = resultBox.querySelectorAll("li");
        for (let i = 0; i < allList.length; i++) {
            //adding onclick attribute in all li tag
            allList[i].setAttribute("onclick", "select(this)");
        }
    }else{
        searchInput.classList.remove("active"); //hide autocomplete box
    }
}

function showSuggestions(list){
    let listData;
    if(!list.length){
        userValue = input.value;
        listData = '<li>'+ userValue +'</li>';
    }else{
        listData = list.join('');
    }
    resultBox.innerHTML = listData;
}

{% comment %} code for adding more row on pressing add button {% endcomment %}
/* Variables */
var row = $(".attr");

function addRow() {
  row.clone(true, true).appendTo("#attributes");
}

function removeRow(button) {
  button.closest("div.attr").remove();
}

$('#attributes .attr:first-child').find('.remove').hide();

/* Doc ready */
$(".add").on('click', function () {
  addRow();  
  if($("#attributes .attr").length > 1) {
    //alert("Can't remove row.");
    $(".remove").show();
  }
});
$(".remove").on('click', function () {
  if($("#attributes .attr").length == 1) {
    //alert("Can't remove row.");
    $(".remove").hide();
  } else {
    removeRow($(this));
    
    if($("#attributes .attr").length == 1) {
        $(".remove").hide();
    }
    
  }
});

/* Variables */
var row1 = $(".attr1");

function addRow1() {
  row1.clone(true, true).appendTo("#attributes1");
}

function removeRow1(button) {
  button.closest("div.attr1").remove();
}

$('#attributes1 .attr1:first-child').find('.remove1').hide();

/* Doc ready */
$(".add1").on('click', function () {
  addRow1();  
  if($("#attributes1 .attr1").length > 1) {
    //alert("Can't remove row.");
    $(".remove1").show();
  }
});
$(".remove1").on('click', function () {
  if($("#attributes1 .attr1").length == 1) {
    //alert("Can't remove row.");
    $(".remove1").hide();
  } else {
    removeRow1($(this));
    
    if($("#attributes1 .attr1").length == 1) {
        $(".remove1").hide();
    }
    
  }
});

/* Variables */
var row2 = $(".attr2");

function addRow2() {
  row2.clone(true, true).appendTo("#attributes2");
}

function removeRow2(button) {
  button.closest("div.attr2").remove();
}

$('#attributes2 .attr2:first-child').find('.remove2').hide();

/* Doc ready */
$(".add2").on('click', function () {
  addRow2();  
  if($("#attributes2 .attr2").length > 1) {
    //alert("Can't remove row.");
    $(".remove2").show();
  }
});
$(".remove2").on('click', function () {
  if($("#attributes2 .attr2").length == 1) {
    //alert("Can't remove row.");
    $(".remove2").hide();
  } else {
    removeRow2($(this));
    
    if($("#attributes2 .attr2").length == 1) {
        $(".remove2").hide();
    }
    
  }
});

</script>
{% endblock %} 